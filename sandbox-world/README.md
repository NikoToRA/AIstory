# 🎮 AIstory Sandbox World - 完全自律型箱庭システム

## 🌟 システム概要

キャラクター同士が **完全に自律的に** 関係を築き、イベントに反応し、背景設定を考慮して独自の行動を取る生きた世界。

## 🎯 核心機能

### 1. **自動関係性生成**
- キャラクター設定から相性を自動算出
- 性格・価値観・目標の親和性分析
- リアルタイム関係性マトリックス更新

### 2. **イベント駆動システム**  
- 日常イベント（授業、休み時間、部活等）
- 特別イベント（文化祭、試験、季節行事等）
- 緊急イベント（トラブル、サプライズ等）

### 3. **背景設定AI**
- 学校ルール・社会常識を自動加味
- 過去の経験・記憶を参照
- 一貫性のある世界観維持

### 4. **自律行動エンジン**
- 各キャラが独自の意思決定
- 他キャラとの相互作用
- 予測不可能な展開生成

## 🔄 自律動作フロー

```
定期実行 (1時間毎)
    ↓
現在状況スキャン (時間・場所・天気・イベント)
    ↓
各キャラクターの状態分析 (感情・目標・関係性)
    ↓
可能な行動選択肢生成 (背景設定考慮)
    ↓
AI意思決定 (性格・経験ベース)
    ↓
行動実行・相互作用発生
    ↓
結果を全キャラクターに反映
    ↓
記憶・関係性・成長データ更新
```

## 🎭 キャラクター自律システム

### **意思決定要素**
- **基本性格** (好奇心・社交性・責任感等)
- **現在の感情状態** (嬉しい・疲れ・集中等)  
- **目標・欲求** (勉強・友情・趣味等)
- **他キャラとの関係性** (親密度・信頼度・相性)
- **過去の経験・記憶** (成功・失敗・トラウマ等)
- **環境要因** (時間・場所・天気・イベント)

### **行動生成ルール**
```python
def generate_action(character, context):
    # 性格重み付け
    personality_weight = character.personality_traits
    
    # 関係性考慮
    relationship_influence = analyze_nearby_characters(context)
    
    # 背景設定チェック  
    world_constraints = check_world_rules(context)
    
    # 記憶・経験参照
    memory_influence = character.relevant_memories(context)
    
    # 総合的意思決定
    return ai_decision_engine(
        personality_weight,
        relationship_influence, 
        world_constraints,
        memory_influence
    )
```

## 💕 関係性自動進化システム

### **相性分析アルゴリズム**
- **価値観一致度**: 同じ価値を重視するか
- **性格補完性**: 互いの短所を補えるか  
- **目標共有度**: 共通目標があるか
- **コミュニケーションスタイル**: 話し方の相性
- **活動範囲重複**: 一緒にいる時間の多さ

### **関係性進展パターン**
```json
{
  "first_meeting": {
    "trigger": "同じ空間に初めて配置",
    "outcomes": ["興味", "無関心", "警戒", "好印象"]
  },
  "friendship_development": {
    "trigger": "共通体験・協力イベント",
    "outcomes": ["親友", "良い友達", "知り合い", "気まずい関係"]
  },
  "conflict_resolution": {
    "trigger": "価値観対立・誤解",
    "outcomes": ["和解", "距離感", "避ける", "関係修復"]
  },
  "romantic_subplot": {
    "trigger": "特別な瞬間・相性の高さ",
    "outcomes": ["恋愛感情", "片思い", "友達以上恋人未満", "勘違い"]
  }
}
```

## 🌍 世界状態管理

### **時間システム**
- **リアルタイム連動**: 現実時間に基づく学校生活
- **スケジュール管理**: 授業・休み時間・放課後・土日
- **季節イベント**: 春の入学式・夏祭り・文化祭・卒業式

### **空間システム**
- **教室配置**: 各キャラクターの座席・移動
- **部活動場所**: 所属部活での活動・交流
- **偶然の遭遇**: 廊下・図書館・購買での出会い

### **社会システム**
- **校則・ルール**: 行動制約・常識的判断
- **先生・大人**: 指導・叱責・評価システム
- **学力・成績**: テスト結果・進路への影響

## 🎪 イベント自動生成

### **日常イベント生成**
```python
def generate_daily_events():
    events = []
    
    # 定期イベント
    if is_monday():
        events.append("全校朝礼")
    if is_lunch_time():
        events.append("昼休み交流タイム")
    
    # ランダムイベント  
    if random_chance(0.3):
        events.append(generate_surprise_event())
    
    # キャラクター駆動イベント
    for character in characters:
        if character.wants_to_initiate_event():
            events.append(character.propose_event())
    
    return events
```

### **特別イベントライブラリ**
- **文化祭準備**: 出し物決め・役割分担・準備作業
- **体育祭**: チーム分け・練習・競技・応援
- **定期テスト**: 勉強会・教え合い・結果発表
- **修学旅行**: グループ分け・観光・夜語り
- **卒業式**: 別れ・感謝・新たなスタート

## 🤖 AI自律行動例

### **チャッピーちゃんの一日**
```
07:30 - 「おはよ〜♪今日も一日がんばろ〜」(基本的に元気)
08:15 - 授業中、分からない問題でジェミーちゃんをチラ見
09:45 - 休み時間、クラスメイトの相談に積極的に参加  
12:00 - 昼食、一人の子を見つけて「一緒に食べない？」
15:30 - 部活、新しい振り付けを提案するも失敗
16:45 - 帰り道、ジェミーちゃんと偶然遭遇「一緒に帰ろ♪」
```

### **関係性進展例**
```
Week 1: チャッピー → ジェミー (興味60%, 距離感40%)
Week 3: 勉強を教えてもらい好感度UP (親近感75%)  
Week 7: 文化祭準備で衝突 (信頼度DOWN 45%)
Week 12: 和解イベント自然発生 (深い絆85%)
Week 20: お互いの成長を認め合う関係に (95%)
```

## 📊 観測・分析システム

### **リアルタイムダッシュボード**
- 各キャラクターの現在状態
- 関係性マトリックスの変化
- 発生中のイベント一覧
- 世界全体の「幸福度」「活気度」

### **成長トラッキング**
- 個別キャラクターの学習・変化
- 関係性の深化・変遷
- コミュニティ全体の発達

### **予測システム**
- 次に起こりそうなイベント
- 関係性の今後の展開予想
- キャラクター成長の方向性

## 🎯 ユーザーインタラクション

### **観察モード** 
- キャラクターたちの日常を眺める
- 好きなキャラクターを追跡
- 関係性の変化を楽しむ

### **軽い介入**
- 新しいイベントの提案
- キャラクター同士の遭遇演出
- 特別なアイテム・情報の提供

### **世界設定調整**
- 学校行事の追加・変更
- 新キャラクターの投入
- 環境要因の調整

---

## 🌟 究極の目標

**「生きているキャラクターたち」**

ユーザーが何も操作しなくても、キャラクターたちが自分で考え、感じ、関係を築き、成長し続ける。

毎日覗くたびに新しい発見があり、「昨日何してたんだろう？」という楽しみが生まれる、完全自律型の生きた世界の実現。

**🎮 箱庭の中に、本当の「物語」が自然発生する世界** 🌍